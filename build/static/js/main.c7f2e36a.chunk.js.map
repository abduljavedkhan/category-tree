{"version":3,"sources":["store/actions/index.js","store/reducers/index.js","components/Node.js","components/Layout/Footer/index.js","components/Category.js","components/Layout/Header/index.js","components/Layout/index.js","components/Card/index.js","index.js"],"names":["CREATE_NODE","DELETE_NODE","ADD_CHILD","REMOVE_CHILD","UPDATE_CHILD","nextId","createNode","name","type","nodeId","deleteNode","addChild","childId","removeChild","updateChild","newCategory","childIds","state","action","filter","id","updatedState","console","log","JSON","stringify","find","node","getAllDescendantIds","reduce","acc","deleteMany","ids","forEach","reducer","descendantIds","ConnectedNode","connect","ownProps","actions","props","useState","showAction","setShowAction","selected","setSelected","parentId","toggleSelected","prev","hasChildren","length","undefined","className","onContextMenu","e","preventDefault","onClick","href","newSubCategory","prompt","alert","map","subCatId","Footer","target","rel","Header","MainLayout","children","Card","store","createStore","render","document","getElementById"],"mappings":"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","file":"static/js/main.c7f2e36a.chunk.js","sourcesContent":["export const CREATE_NODE = \"CREATE_NODE\";\r\nexport const DELETE_NODE = \"DELETE_NODE\";\r\nexport const ADD_CHILD = \"ADD_CHILD\";\r\nexport const REMOVE_CHILD = \"REMOVE_CHILD\";\r\nexport const UPDATE_CHILD = \"UPDATE_CHILD\";\r\n\r\nlet nextId = 0;\r\nexport const createNode = (name) => ({\r\n  type: CREATE_NODE,\r\n  nodeId: `new_${nextId++}`,\r\n  name,\r\n});\r\n\r\nexport const deleteNode = (nodeId) => ({\r\n  type: DELETE_NODE,\r\n  nodeId,\r\n});\r\n\r\nexport const addChild = (nodeId, childId) => ({\r\n  type: ADD_CHILD,\r\n  nodeId,\r\n  childId,\r\n});\r\n\r\nexport const removeChild = (nodeId, childId) => ({\r\n  type: REMOVE_CHILD,\r\n  nodeId,\r\n  childId,\r\n});\r\n\r\nexport const updateChild = (nodeId, childId, newCategory, childIds) => ({\r\n  type: UPDATE_CHILD,\r\n  nodeId,\r\n  childId,\r\n  newCategory,\r\n  childIds,\r\n});\r\n","import {\r\n  ADD_CHILD,\r\n  REMOVE_CHILD,\r\n  CREATE_NODE,\r\n  DELETE_NODE,\r\n  UPDATE_CHILD,\r\n} from \"../../store/actions\";\r\n\r\nconst childIds = (state, action) => {\r\n  switch (action.type) {\r\n    case ADD_CHILD:\r\n      return [...state, action.childId];\r\n    case REMOVE_CHILD:\r\n      return state.filter((id) => id !== action.childId);\r\n    case UPDATE_CHILD:\r\n      console.log(\r\n        \"s \" +\r\n          JSON.stringify(state) +\r\n          \"  \" +\r\n          action.childId +\r\n          \"   \" +\r\n          action.newCategory\r\n      );\r\n      let updatedState;\r\n      if (state.find((id) => id === action.childId)) {\r\n        console.log(\"hrer \" + state.childIds[action.childId]);\r\n        updatedState = { ...state[action.childId], name: action.newCategory };\r\n        return { ...state, [action.childId]: updatedState };\r\n      }\r\n      break;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst node = (state, action) => {\r\n  switch (action.type) {\r\n    case CREATE_NODE:\r\n      return {\r\n        id: action.nodeId,\r\n        name: `${action.name}`,\r\n        childIds: [],\r\n      };\r\n\r\n    case ADD_CHILD:\r\n    case REMOVE_CHILD:\r\n      return {\r\n        ...state,\r\n        childIds: childIds(state.childIds, action),\r\n      };\r\n    case UPDATE_CHILD:\r\n      return {\r\n        ...state,\r\n        childIds: childIds(state.childIds, action),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst getAllDescendantIds = (state, nodeId) =>\r\n  state[nodeId].childIds.reduce(\r\n    (acc, childId) => [...acc, childId, ...getAllDescendantIds(state, childId)],\r\n    []\r\n  );\r\n\r\nconst deleteMany = (state, ids) => {\r\n  state = { ...state };\r\n  ids.forEach((id) => delete state[id]);\r\n  return state;\r\n};\r\n\r\nconst reducer = (state = {}, action) => {\r\n  const { nodeId } = action;\r\n  if (typeof nodeId === \"undefined\") {\r\n    return state;\r\n  }\r\n\r\n  if (action.type === DELETE_NODE) {\r\n    const descendantIds = getAllDescendantIds(state, nodeId);\r\n    return deleteMany(state, [nodeId, ...descendantIds]);\r\n  }\r\n\r\n  return {\r\n    ...state,\r\n    [nodeId]: node(state[nodeId], action),\r\n  };\r\n};\r\n\r\nexport default reducer;","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../store/actions\";\r\n\r\nexport const Node = (props) => {\r\n  const handleAddChildClick = (e) => {\r\n    e.preventDefault();\r\n    const newSubCategory = prompt(\"Add Sub Category\");\r\n    const { addChild, createNode, id } = props;\r\n    if (newSubCategory === \"\") {\r\n      alert(\"Category can't be empty\");\r\n    } else if (newSubCategory) {\r\n      const childId = createNode(newSubCategory).nodeId;\r\n      addChild(id, childId);\r\n    } else {\r\n      // user hit cancel\r\n    }\r\n  };\r\n\r\n  const handleRemoveClick = (e) => {\r\n    e.preventDefault();\r\n    const { removeChild, deleteNode, parentId, id } = props;\r\n    removeChild(parentId, id);\r\n    deleteNode(id);\r\n  };\r\n\r\n  // const handleEditClick = (e) => {\r\n  //   e.preventDefault();\r\n  //   const newCategory = prompt(\"Update Sub Category\");\r\n  //   const { updateChild, parentId, id } = props;\r\n  //   updateChild(parentId, id, newCategory);\r\n  // };\r\n\r\n  const [showAction, setShowAction] = useState(false);\r\n  const handleClick = (e) => {\r\n    e.preventDefault();\r\n    if (e.type === \"click\") {\r\n      setShowAction(true);\r\n    } else if (e.type === \"contextmenu\") {\r\n      setShowAction(true);\r\n    }\r\n  };\r\n\r\n  const [selected, setSelected] = useState(props.selected ?? true);\r\n  const { parentId, childIds, name } = props;\r\n  const toggleSelected = () => {\r\n    setSelected((prev) => !prev);\r\n  };\r\n  const hasChildren = childIds && childIds.length !== 0;\r\n  const renderSubCategory = (subCatId) => {\r\n    const { id } = props;\r\n    if (hasChildren) {\r\n      return (\r\n        <div className=\" pl-4\" key={subCatId}>\r\n          <ConnectedNode id={subCatId} parentId={id} />\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n  return (\r\n    <>\r\n      <div>\r\n        {parentId !== undefined && (\r\n          <div className=\"flex m-1 p-2  border-green-400 border-b-2  justify-between\">\r\n            <div\r\n              onContextMenu={handleClick}\r\n              className=\"text-green-700 text-md font-bold\"\r\n            >\r\n              {`${name}`}\r\n              <span className=\"text-yellow-700 mx-1 px-1\">{`(${\r\n                childIds && childIds.length\r\n              })`}</span>\r\n            </div>\r\n            {hasChildren && selected ? (\r\n              <button\r\n                onClick={toggleSelected}\r\n                className=\"text-red-900 justify-center items-center  border-2 border-green-700  w-8 h-8 rounded-md bg-gray-400 my-1 mr-2\"\r\n              >\r\n                -\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={toggleSelected}\r\n                className=\"text-red-900 justify-center items-center  border-2 border-green-700  w-8 h-8 rounded-md bg-gray-400  my-1 mr-2\"\r\n              >\r\n                +\r\n              </button>\r\n            )}            \r\n            {showAction ? (\r\n              <div className=\"flex justify-end ml-28 pl-64 \">\r\n                {\" \"}\r\n\r\n                {typeof parentId !== \"undefined\" && (\r\n                  \r\n                  <div className=\"flex justify-center\">\r\n                    <button\r\n                      onClick={handleRemoveClick}\r\n                      className=\"mr-2 ring-yellow-500 cursor-pointer hover:text-red-900 hover:border-red-400 hover:bg-green-400 border-2 text-xs  p-2 text-yellow-400 bg-red-900 border-yellow-300 h-10\"\r\n                    >\r\n                      Delete\r\n                    </button>\r\n\r\n                    <button\r\n                      href=\"#\"\r\n                      onClick={() => {}}\r\n                      className=\"mr-2 ring-yellow-500 cursor-pointer hover:text-red-900 hover:border-red-400 hover:bg-green-400 border-2 text-xs  p-2 text-yellow-400 bg-red-900 border-yellow-300 h-10\"\r\n                    >\r\n                      Edit\r\n                    </button>\r\n\r\n                    <button\r\n                      className=\"ring-yellow-500 cursor-pointer hover:text-red-900 hover:border-red-400 hover:bg-green-400 border-2 text-xs  p-2 text-yellow-400 bg-red-900 border-yellow-300 h-10 w-28\"\r\n                      onClick={handleAddChildClick}\r\n                    >\r\n                      + Sub Category\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              ``\r\n            )}\r\n          </div>\r\n        )}\r\n        <ul>{selected && childIds && childIds.map(renderSubCategory)}</ul>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n  return state[ownProps.id];\r\n}\r\n\r\nconst ConnectedNode = connect(mapStateToProps, actions)(Node);\r\nexport default ConnectedNode;\r\n","const Footer = () => {\r\n  return (\r\n    <div className=\"text-center text-sm md:text-md bg-black text-blue-50\">\r\n      <span className=\"text-xs\">Developed By</span>{\" \"}\r\n      <span className=\"text-red-400\">\r\n        <a\r\n          href=\"https://github.com/abduljavedkhan\"\r\n          target=\"_blank\"\r\n          rel=\"noreferrer\"\r\n        >\r\n          Javed\r\n        </a>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as actions from \"../store/actions\";\r\n\r\nconst Category = ({ addChild, createNode }) => {\r\n  const handleAddCateClick = (e) => {\r\n    e.preventDefault();\r\n    const newCategory = prompt(\"Add Category\");\r\n    if (newCategory === \"\") {\r\n      alert(\"Category can't be empty\");\r\n    } else if (newCategory) {\r\n      const childId = createNode(newCategory).nodeId;\r\n      addChild(0, childId);\r\n    } else {\r\n      // user hit cancel\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex justify-center items-center\">\r\n      <button\r\n        className=\" m-2 ring-yellow-500 cursor-pointer hover:text-red-900 hover:border-red-400 hover:bg-green-400 border-2 text-sm  p-2 text-yellow-400 bg-red-900 border-yellow-300\"\r\n        onClick={handleAddCateClick}\r\n      >\r\n        Add Catergory\r\n      </button>\r\n      <button\r\n        className=\"  m-2 ring-yellow-500 cursor-pointer hover:text-red-900 hover:border-red-400 hover:bg-green-400 border-2 text-sm  p-2 text-yellow-400 bg-red-900 border-yellow-300\"\r\n        onClick={() => {}}\r\n      >\r\n        Expand All\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state, ownProps) {\r\n  return state[ownProps.id];\r\n}\r\n\r\nexport default connect(mapStateToProps, actions)(Category);\r\n","import React from \"react\";\r\nimport Category from \"../../Category\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <>\r\n    <header>\r\n      <div className=\"flex justify-between p-4  bg-yellow-400 shadow-md border-b-4 border-green-300 h-20\">\r\n        <h1 className=\"font-bold text-xl md:text-3xl lg:3xl px-4 py-1 w-max text-red-900 flex-wrap-reverse\">\r\n          Category Tree\r\n        </h1>\r\n        <Category />\r\n      </div>\r\n\r\n    </header>\r\n\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import Footer from \"./Footer\";\r\nimport Header from \"./Header\";\r\n\r\nconst MainLayout = ({ children }) => {\r\n    return (\r\n        <div className=\"min-h-screen flex flex-col justify-between bg-gray-100\">\r\n            <Header />\r\n                {children}\r\n            <Footer />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MainLayout;\r\n","import React from \"react\";\r\n\r\nconst Card = (props) => {\r\n    return (\r\n        <div className=\" w-10/12 md:w-5/6 m-5 max-h-full bg-gray-300 pt-8 pb-4 px-2 rounded-lg shadow-xl border-b-2 border-red-900 ring-red-900 items-center justify-center\">\r\n            {props.children}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Card;\r\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { createStore } from \"redux\";\r\nimport { Provider } from \"react-redux\";\r\nimport \"./index.css\";\r\nimport reducer from \"./store/reducers\";\r\nimport Node from \"./components/Node\";\r\nimport MainLayout from \"./components/Layout\"\r\nimport Card from \"./components/Card\";\r\n\r\nlet tree = {\r\n  0: {\r\n    id: 0,\r\n    name: \"root\",\r\n    childIds: [],\r\n  },\r\n};\r\n\r\n// const tree = generateTree()\r\nconst store = createStore(reducer, tree);\r\nrender(\r\n  <Provider store={store}>\r\n    <MainLayout>\r\n      <Card>\r\n      <Node id={0} />\r\n      </Card>\r\n    </MainLayout>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}